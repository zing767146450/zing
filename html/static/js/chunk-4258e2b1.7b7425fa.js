(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4258e2b1"],{"079b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"查看消息","close-on-click-modal":!1,visible:t.visible,"lock-scroll":"",width:"80%"},on:{"update:visible":function(e){t.visible=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"notice-wapper"},[a("h1",{staticClass:"title"},[t._v(t._s(t.info.title))]),a("div",{staticClass:"info"},[a("span",[t._v(t._s(t._f("toDate")(t.info.lastModifyTime)))]),a("span",[t._v(t._s(t.info.creatorUser))])]),a("div",{staticClass:"main",domProps:{innerHTML:t._s(t.info.bodyText)}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("common.cancelButton")))])],1)])},n=[],o=a("0503"),s={data:function(){return{visible:!1,loading:!1,info:{}}},methods:{init:function(t){var e=this;this.visible=!0,this.loading=!0,Object(o["c"])(t).then((function(t){e.info=t.data,e.loading=!1}))}}},l=s,c=(a("6695"),a("2877")),r=Object(c["a"])(l,i,n,!1,null,"5ec52a5f",null);e["default"]=r.exports},"1e0e":function(t,e,a){},6695:function(t,e,a){"use strict";a("1e0e")},"8cd4":function(t,e,a){},c8fa:function(t,e,a){"use strict";a("8cd4")},ff88:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"JNPF-common-layout MessageRecord-container"},[a("div",{staticClass:"JNPF-common-layout-center"},[a("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[a("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"请输入关键词查询",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.search()}}},[t._v("\n              "+t._s(t.$t("common.search")))]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(e){return t.reset()}}},[t._v(t._s(t.$t("common.reset"))+"\n            ")])],1)],1)],1)],1),a("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[a("el-tabs",{staticClass:"messageRecord-tab",attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),a("el-tab-pane",{attrs:{label:"通知",name:"1"}}),a("el-tab-pane",{attrs:{label:"私信",name:"2"}}),a("div",{staticClass:"box"},[a("div",{staticClass:"JNPF-common-head"},[a("div",{staticClass:"left-btn"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.handleDel}},[t._v("删除")])],1),a("div",{staticClass:"JNPF-common-head-right"},[a("el-tooltip",{attrs:{effect:"dark",content:t.$t("common.refresh"),placement:"top"}},[a("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(e){return t.reset()}}})],1),a("screenfull")],1)]),a("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,hasC:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"title",label:"消息标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticStyle:{"font-size":"12px"},on:{click:function(a){return t.readInfo(e.row)}}},[t._v(t._s(e.row.title)+"\n                ")])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"消息类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(1==e.row.type?"系统消息":"私信信息")+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"creatorUser",label:"发送人员",width:"120"}}),a("el-table-column",{attrs:{prop:"lastModifyTime",label:"发送时间",formatter:t.jnpf.tableDateFormat,width:"120"}}),a("el-table-column",{attrs:{prop:"isRead",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.isRead?a("el-tag",{attrs:{type:"success"}},[t._v("已读")]):a("el-tag",{attrs:{type:"info"}},[t._v("未读")])]}}])})],1),a("pagination",{attrs:{total:t.total,page:t.listQuery.currentPage,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"currentPage",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.initData}})],1)],1)],1)],1),t.formVisible?a("Form",{ref:"Form",on:{refreshDataList:t.initData}}):t._e()],1)},n=[],o=a("5530"),s=(a("386d"),a("0503")),l=a("079b"),c={name:"messageRecord",components:{Form:l["default"]},data:function(){return{visible:!1,formVisible:!1,keyword:"",activeName:"0",list:[],multipleSelection:[],total:0,listLoading:!0,listQuery:{currentPage:1,pageSize:20,sort:"desc"}}},watch:{activeName:function(t){this.keyword="",this.search()}},created:function(){this.initData()},methods:{search:function(){this.listQuery={currentPage:1,pageSize:20,sort:"desc"},this.initData()},reset:function(){this.keyword="",this.search()},initData:function(){var t=this;this.listLoading=!0;var e="0"==this.activeName?"":this.activeName,a=Object(o["a"])(Object(o["a"])({},this.listQuery),{},{keyword:this.keyword,type:e});this.list=[],Object(s["g"])(a).then((function(e){t.list=e.data.list,t.total=e.data.pagination.total,t.listLoading=!1}))},handleDel:function(){var t=this;if(this.multipleSelection.length){var e={ids:this.multipleSelection.join(",")};this.$confirm("您确定要删除这些数据吗, 是否继续?","提示",{type:"warning"}).then((function(){Object(s["b"])(e).then((function(e){t.$message({type:"success",message:e.msg}),t.initData()}))})).catch((function(){}))}else this.$message({type:"error",message:"请选择一条数据"})},handleSelectionChange:function(t){this.multipleSelection=t.map((function(t){return t.id}))},readInfo:function(t){var e=this;1==t.type?(this.formVisible=!0,t.isRead="1",this.$nextTick((function(){e.$refs.Form.init(t.id)}))):Object(s["c"])(t.id).then((function(a){t.isRead="1";var i=a.data.bodyText?JSON.parse(a.data.bodyText):{},n="flowLaunch";2==i.type&&(n="flowTodo"),3==i.type&&(n="flowCirculate"),e.$router.push("/workFlow/".concat(n))}))}}},r=c,u=(a("c8fa"),a("2877")),d=Object(u["a"])(r,i,n,!1,null,"0cdc64a4",null);e["default"]=d.exports}}]);