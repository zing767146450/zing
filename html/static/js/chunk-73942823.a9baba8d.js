(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73942823"],{"20f7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.searchList.length?n("el-row",{staticClass:"JNPF-common-search-box",attrs:{gutter:16}},[n("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.searchList,(function(t,i){return n("el-col",{key:i,attrs:{span:6}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:i<3||i>=3&&e.showAll,expression:"index<3 || (index>=3 && showAll)"}],attrs:{label:t.__config__.label}},[e.useInputList.indexOf(t.__config__.jnpfKey)>-1?[n("el-input",{staticClass:"item",attrs:{placeholder:t.__config__.label,clearable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e.useDateList.indexOf(t.__config__.jnpfKey)>-1?[n("el-date-picker",{staticClass:"item",attrs:{"value-format":"timestamp",format:"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e.useSelectList.indexOf(t.__config__.jnpfKey)>-1?[n("el-select",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label,clearable:"",filterable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},e._l(t.__slot__.options,(function(e,i){return n("el-option",{key:i,attrs:{label:e[t.__config__.props.label],value:e[t.__config__.props.value]}})})),1)]:["numInput"===t.__config__.jnpfKey||"calculate"===t.__config__.jnpfKey?[n("num-range",{model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"cascader"===t.__config__.jnpfKey?[n("el-cascader",{staticClass:"item",attrs:{options:t.options,clearable:"","show-all-levels":t["show-all-levels"],props:t.props.props,filterable:"",placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"time"===t.__config__.jnpfKey||"timeRange"===t.__config__.jnpfKey?[n("el-time-picker",{staticClass:"item",attrs:{"start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:"","value-format":t["value-format"],format:t.format,"is-range":""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"date"===t.__config__.jnpfKey?[n("el-date-picker",{staticClass:"item",attrs:{type:t.type+"range","value-format":t["value-format"],format:t.format,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"dateRange"===t.__config__.jnpfKey?[n("el-date-picker",{staticClass:"item",attrs:{type:t.type,"value-format":t["value-format"],format:t.format,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),e.commonList.includes(t.__config__.jnpfKey)?[n(t.__config__.tag,{tag:"component",staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"address"===t.__config__.jnpfKey?[n("JNPFAddress",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label,level:t.level,clearable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"treeSelect"===t.__config__.jnpfKey?[n("JNPF-TreeSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label,options:t.options,multiple:t.multiple,clearable:""},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"createUser"===t.__config__.jnpfKey||"modifyUser"===t.__config__.jnpfKey?[n("userSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"currOrganize"===t.__config__.jnpfKey?[n("comSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"currDept"===t.__config__.jnpfKey?[n("depSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e(),"currPosition"===t.__config__.jnpfKey?[n("posSelect",{staticClass:"item",attrs:{placeholder:"请选择"+t.__config__.label},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})]:e._e()]],2)],1)})),n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v(e._s(e.$t("common.search"))+"\n        ")]),n("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return e.reset()}}},[e._v(e._s(e.$t("common.reset"))+"\n        ")]),e.searchList.length>3?[e.showAll?n("el-button",{attrs:{type:"text",icon:"el-icon-arrow-up"},on:{click:function(t){e.showAll=!1}}},[e._v("\n            收起")]):n("el-button",{attrs:{type:"text",icon:"el-icon-arrow-down"},on:{click:function(t){e.showAll=!0}}},[e._v("\n            展开\n          ")])]:e._e()],2)],1)],2)],1):e._e()},a=[],o=(n("ac6a"),n("ed08")),s=n("100e"),r=n("9b6f"),l=n("17de"),c={props:["list"],data:function(){return{showAll:!1,searchList:[],commonList:["comSelect","depSelect","posSelect","userSelect","dicSelect"],useInputList:s["g"],useDateList:s["f"],useSelectList:s["h"]}},watch:{list:{handler:function(e){this.searchList=Object(o["b"])(e),this.buildOptions(this.searchList)},deep:!0,immediate:!0}},methods:{buildOptions:function(e){e.forEach((function(e){var t=e.__config__;if(s["a"].indexOf(t.jnpfKey)>-1){var n="treeSelect"===t.jnpfKey||"cascader"===t.jnpfKey;if("dictionary"===t.dataType){if(!t.dictionaryType)return;Object(r["i"])(t.dictionaryType).then((function(t){n?e.options=t.data.list:e.__slot__.options=t.data.list}))}if("dynamic"===t.dataType){if(!t.propsUrl)return;Object(l["i"])(t.propsUrl).then((function(t){n?e.options=t.data:e.__slot__.options=t.data}))}}}))},search:function(){for(var e={},t=0;t<this.searchList.length;t++){var n=this.searchList[t];n.value&&(Array.isArray(n.value)?n.value.length&&(e[n.__vModel__]=n.value):e[n.__vModel__]=n.value)}var i="{}"===JSON.stringify(e)?"":JSON.stringify(e);this.$emit("search",i)},reset:function(){this.searchList=Object(o["b"])(this.list),this.$emit("search","")},treeReset:function(){this.searchList=Object(o["b"])(this.list)}}},u=c,f=n("2877"),d=Object(f["a"])(u,i,a,!1,null,null,null);t["default"]=d.exports},"226a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-center"}},[n("div",{staticClass:"JNPF-preview-main flow-form-main nohead"},[n("div",{staticClass:"btns"},["-1"==e.setting.opType?[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.eventLancher("submit")}}},[e._v("\n          "+e._s(e.properties.submitBtnText||"提交审核"))]),n("el-button",{attrs:{type:"warning",loading:e.btnLoading},on:{click:function(t){return e.eventLancher("save")}}},[e._v("\n          "+e._s(e.properties.saveBtnText||"保存草稿"))])]:e._e(),1==e.setting.opType?[e.properties.hasTransferBtn?n("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.openUserBox("transfer")}}},[e._v(e._s(e.properties.transferBtnText||"转 办"))]):e._e(),e.properties.hasAuditBtn?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.eventLancher("audit")}}},[e._v("\n          "+e._s(e.properties.auditBtnText||"通 过"))]):e._e(),e.properties.hasRejectBtn?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.eventLancher("reject")}}},[e._v("\n          "+e._s(e.properties.rejectBtnText||"拒 绝"))]):e._e()]:e._e(),0==e.setting.opType&&1==e.setting.status?[e.properties.hasPressBtn||void 0===e.properties.hasPressBtn?n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.press()}}},[e._v("\n          "+e._s(e.properties.pressBtnText||"催 办"))]):e._e(),e.properties.hasRevokeBtn||void 0===e.properties.hasRevokeBtn?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.revoke()}}},[e._v("\n          "+e._s(e.properties.revokeBtnText||"撤 回"))]):e._e()]:e._e(),2==e.setting.opType&&e.properties.hasRevokeBtn?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.recall()}}},[e._v(e._s(e.properties.revokeBtnText||"撤 回"))]):e._e(),4==e.setting.opType?[1==e.setting.status?n("el-button",{attrs:{type:"primary"},on:{click:e.openAssignBox}},[e._v("指 派\n        ")]):e._e(),2!=e.setting.status&&5!=e.setting.status?n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancel()}}},[e._v("终 止")]):e._e()]:e._e(),n("el-button",{on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.$t("common.cancelButton")))])],2),0!=e.setting.opType&&4!=e.setting.opType||"0"!==e.activeTab?e._e():n("div",{staticClass:"approve-result"},[n("div",{staticClass:"approve-result-img",class:e._f("flowStatus")(e.flowTaskInfo.status)})]),n("el-tabs",{staticClass:"JNPF-el_tabs",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"表单信息"}},[n(e.currentView,{ref:"form",tag:"component",on:{close:e.goBack,eventReciver:e.eventReciver,setLoad:e.setLoad,setPageLoad:e.setPageLoad}})],1),n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"流程信息"}},[e.flowTemplateJson.nodeId?n("Process",{attrs:{conf:e.flowTemplateJson}}):e._e()],1),"-1"!=e.setting.opType?n("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{label:"流转记录"}},[n("recordList",{attrs:{list:e.flowTaskOperatorRecordList,endTime:e.endTime}})],1):e._e()],1),n("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"audit"===e.eventType?"审批通过":"审批拒绝","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"","append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{attrs:{"label-width":"80px"}},["audit"===e.eventType&&e.properties.hasFreeApprover?n("el-form-item",{attrs:{label:"加签人员"}},[n("user-select",{attrs:{placeholder:"请选择加签人员,不选即该节点审核结束"},model:{value:e.handleId,callback:function(t){e.handleId=t},expression:"handleId"}})],1):e._e(),n("el-form-item",{attrs:{label:"审批意见"}},[n("el-input",{attrs:{placeholder:"请输入审批意见（选填）",type:"textarea",rows:4},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e.properties.hasSign?n("el-form-item",[n("div",{staticClass:"sign-main"},[n("div",{staticClass:"sign-head"},[n("div",{staticClass:"sign-tip"},[e._v("请在这里输入你的签名")]),n("div",{staticClass:"sign-action"},[n("el-button",{staticClass:"clear-btn",attrs:{size:"mini"},on:{click:e.handleReset}},[e._v("清空")]),n("el-button",{staticClass:"sure-btn",attrs:{size:"mini",disabled:!!e.signImg},on:{click:e.handleGenerate}},[e._v("确定签名")])],1)]),n("div",{staticClass:"sign-box"},[e.signImg?e._e():n("vue-esign",{ref:"esign",attrs:{height:330,lineWidth:5}}),e.signImg?n("img",{staticClass:"sign-img",attrs:{src:e.signImg,alt:""}}):e._e()],1)])]):e._e(),e.properties.isCustomCopy?n("el-form-item",{attrs:{label:"抄送人员"}},[n("user-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.copyIds,callback:function(t){e.copyIds=t},expression:"copyIds"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),n("el-button",{attrs:{type:"primary",loading:e.approvalBtnLoading},on:{click:function(t){return e.handleApproval()}}},[e._v("\n          "+e._s(e.$t("common.confirmButton"))+"\n        ")])],1)],1),n("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"指派","close-on-click-modal":!1,visible:e.assignVisible,"lock-scroll":"","append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.assignVisible=t}}},[n("el-form",{ref:"assignForm",attrs:{"label-width":"80px",model:e.assignForm,rules:e.assignRules}},[n("el-form-item",{attrs:{label:"指派节点",prop:"nodeCode"}},[n("el-select",{attrs:{placeholder:"请选择指派节点"},model:{value:e.assignForm.nodeCode,callback:function(t){e.$set(e.assignForm,"nodeCode",t)},expression:"assignForm.nodeCode"}},e._l(e.assignNodeList,(function(e){return n("el-option",{key:e.nodeCode,attrs:{label:e.nodeName,value:e.nodeCode}})})),1)],1),n("el-form-item",{attrs:{label:"指派人",prop:"freeApproverUserId"}},[n("user-select",{attrs:{placeholder:"请选择指派人"},model:{value:e.assignForm.freeApproverUserId,callback:function(t){e.$set(e.assignForm,"freeApproverUserId",t)},expression:"assignForm.freeApproverUserId"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.assignVisible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAssign()}}},[e._v(e._s(e.$t("common.confirmButton"))+"\n        ")])],1)],1),e.userBoxVisible?n("UserBox",{ref:"userBox",attrs:{title:e.userBoxTitle},on:{submit:e.handleTransfer}}):e._e()],1)])},a=[],o=n("5530"),s=(n("ac6a"),n("5451")),r=n("e200"),l=n("7361"),c=n("826a"),u=n("ce76"),f=n("94ab"),d=n("afcb"),m=n.n(d),p={components:{recordList:u["default"],Process:f["a"],vueEsign:m.a},data:function(){return{userBoxVisible:!1,userBoxTitle:"审批人",assignVisible:!1,assignForm:{nodeCode:"",freeApproverUserId:""},assignRules:{nodeCode:[{required:!0,message:"请选择指派节点",trigger:"change"}],freeApproverUserId:[{required:!0,message:"请选择指派人",trigger:"change"}]},assignNodeList:[],currentView:"",formData:{},setting:{},flowFormInfo:{},flowTaskInfo:{},flowTaskNodeList:[],flowTemplateJson:{},flowTaskOperatorRecordList:[],properties:{},endTime:0,visible:!1,reason:"",handleId:"",activeTab:"0",loading:!1,btnLoading:!1,approvalBtnLoading:!1,eventType:"",signImg:"",copyIds:""}},methods:{goBack:function(e){this.$emit("close",e)},init:function(e){this.loading=!0,this.activeTab="0",this.setting=e,"-1"==this.setting.opType?this.getEngineInfo(e):this.getBeforeInfo(e)},getEngineInfo:function(e){var t=this;Object(s["e"])(e.flowId).then((function(i){e.type=i.data.type,1==e.formType?i.data.formUrl?t.currentView=function(e){return Promise.all([n.e("chunk-commons"),n.e("chunk-2d0e1db4"),n.e("chunk-184ba2a4"),n.e("chunk-02594d6c"),n.e("chunk-e3c23184")]).then(function(){var t=[n("4b3b")("./".concat(i.data.formUrl))];e.apply(null,t)}.bind(this)).catch(n.oe)}:t.currentView=function(t){return n.e("chunk-52af6cba").then(function(){var i=[n("e495")("./".concat(e.enCode))];t.apply(null,i)}.bind(this)).catch(n.oe)}:t.currentView=function(e){return n.e("chunk-2d0da394").then(function(){var t=[n("6b4f")];e.apply(null,t)}.bind(this)).catch(n.oe)},e.formConf=i.data.formData,t.flowTemplateJson=i.data.flowTemplateJson?JSON.parse(i.data.flowTemplateJson):null,t.flowTemplateJson.state="state-curr",e.formOperates=[],t.properties=t.flowTemplateJson&&t.flowTemplateJson.properties||{},t.flowTemplateJson&&t.flowTemplateJson.properties&&t.flowTemplateJson.properties.formOperates&&(e.formOperates=t.flowTemplateJson.properties.formOperates||[]),setTimeout((function(){t.$nextTick((function(){t.$refs.form&&t.$refs.form.init(e)}))}),500)})).catch((function(){t.loading=!1}))},getBeforeInfo:function(e){var t=this;Object(r["d"])(e.id,{taskNodeId:e.taskNodeId}).then((function(i){if(t.flowFormInfo=i.data.flowFormInfo,t.flowTaskInfo=i.data.flowTaskInfo,e.type=t.flowTaskInfo.type,1==e.formType?t.flowTaskInfo.formUrl?t.currentView=function(e){return Promise.all([n.e("chunk-commons"),n.e("chunk-2d0e1db4"),n.e("chunk-184ba2a4"),n.e("chunk-02594d6c"),n.e("chunk-e3c23184")]).then(function(){var i=[n("4b3b")("./".concat(t.flowTaskInfo.formUrl))];e.apply(null,i)}.bind(this)).catch(n.oe)}:t.currentView=function(t){return n.e("chunk-52af6cba").then(function(){var i=[n("e495")("./".concat(e.enCode))];t.apply(null,i)}.bind(this)).catch(n.oe)}:t.currentView=function(e){return n.e("chunk-2d0da394").then(function(){var t=[n("6b4f")];e.apply(null,t)}.bind(this)).catch(n.oe)},t.flowTaskNodeList=i.data.flowTaskNodeList,t.flowTemplateJson=t.flowTaskInfo.flowTemplateJson?JSON.parse(t.flowTaskInfo.flowTemplateJson):null,t.flowTaskOperatorRecordList=i.data.flowTaskOperatorRecordList,t.properties=i.data.approversProperties||{},t.endTime=100==t.flowTaskInfo.completion?t.flowTaskInfo.endTime:0,e.formConf=i.data.flowFormInfo,1!=e.opType&&(e.readonly=!0),e.formOperates=[],0==e.opType?(t.properties=t.flowTemplateJson&&t.flowTemplateJson.properties||{},t.flowTemplateJson&&t.flowTemplateJson.properties&&t.flowTemplateJson.properties.formOperates&&(e.formOperates=t.flowTemplateJson.properties.formOperates||[])):e.formOperates=i.data.formOperates||[],t.flowTaskNodeList.length){for(var a=[],o=function(n){var i=t.flowTaskNodeList[n];4==e.opType&&1==i.type&&a.push(i);var o=function e(t){if(Array.isArray(t)&&t.forEach((function(t){return e(t)})),t.nodeId===i.nodeCode)return 0==i.type&&(t.state="state-past"),1==i.type&&(t.state="state-curr"),void("approver"!==i.nodeType&&"start"!==i.nodeType&&"subFlow"!==i.nodeType||(t.content=i.userName));t.conditionNodes&&Array.isArray(t.conditionNodes)&&e(t.conditionNodes),t.childNode&&e(t.childNode)};o(t.flowTemplateJson)},s=0;s<t.flowTaskNodeList.length;s++)o(s);t.assignNodeList=a}setTimeout((function(){t.$nextTick((function(){t.$refs.form&&t.$refs.form.init(e)}))}),500)})).catch((function(){t.loading=!1}))},eventLancher:function(e){this.$refs.form&&this.$refs.form.dataFormSubmit(e)},eventReciver:function(e,t){if(this.formData=e,this.eventType=t,"save"===t||"submit"===t)return this.submitOrSave();"audit"!==t&&"reject"!==t||(this.handleId="",this.reason="",this.copyIds="",this.handleReset(),this.visible=!0)},submitOrSave:function(){var e=this;if(this.formData.status="submit"===this.eventType?0:1,"save"===this.eventType)return this.handleRequest();this.$confirm("您确定要提交当前流程吗, 是否继续?","提示",{type:"warning"}).then((function(){e.handleRequest()})).catch((function(){}))},handleRequest:function(){var e=this;this.formData.id||delete this.formData.id,"save"===this.eventType&&(this.btnLoading=!0);var t=null;t=1==this.setting.formType?this.formData.id?c["f"]:c["a"]:this.formData.id?c["d"]:c["b"],t(this.setting.enCode,this.formData).then((function(t){e.$message({message:t.msg,type:"success",duration:1500,onClose:function(){"save"===e.eventType&&(e.btnLoading=!1),e.$emit("close",!0)}})})).catch((function(){"save"===e.eventType&&(e.btnLoading=!1)}))},revoke:function(){var e=this;this.$prompt("","撤回流程",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入撤回原因（选填）",inputType:"textarea",inputValue:"",closeOnClickModal:!1}).then((function(t){var n=t.value;Object(l["d"])(e.setting.id,{handleOpinion:n}).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.$emit("close",!0)}})}))})).catch((function(){}))},press:function(){var e=this;this.$confirm("此操作将提示该节点尽快处理，是否继续?","提示",{type:"warning"}).then((function(){Object(l["c"])(e.setting.id).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3})}))})).catch((function(){}))},recall:function(){var e=this;this.$prompt("","撤回审核",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入撤回原因（选填）",inputType:"textarea",inputValue:"",closeOnClickModal:!1}).then((function(t){var n=t.value;Object(r["f"])(e.setting.taskId,{handleOpinion:n}).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.$emit("close",!0)}})}))})).catch((function(){}))},cancel:function(){var e=this;this.$prompt("","终止审核不可恢复",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入终止原因（选填）",inputType:"textarea",inputValue:"",closeOnClickModal:!1}).then((function(t){var n=t.value;Object(r["c"])(e.setting.taskId,{handleOpinion:n}).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.$emit("close",!0)}})}))})).catch((function(){}))},openUserBox:function(e){var t=this;this.userBoxVisible=!0,this.$nextTick((function(){t.$refs.userBox.init()}))},handleTransfer:function(e){var t=this;Object(r["h"])(this.setting.taskId,{freeApproverUserId:e}).then((function(e){t.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){t.$emit("close",!0)}})}))},openAssignBox:function(){var e=this;this.assignVisible=!0,this.$nextTick((function(){e.$refs["assignForm"].resetFields()}))},handleAssign:function(){var e=this;this.$refs["assignForm"].validate((function(t){t&&Object(r["a"])(e.setting.taskId,e.assignForm).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.$emit("close",!0)}})}))}))},handleApproval:function(){var e=this;if(!this.properties.hasSign||this.signImg){var t={handleOpinion:this.reason,formData:this.formData,enCode:this.setting.enCode,signImg:this.signImg,copyIds:this.copyIds};"audit"===this.eventType&&this.properties.hasFreeApprover&&(t=Object(o["a"])({freeApproverUserId:this.handleId},t));var n="audit"===this.eventType?r["b"]:r["g"];this.approvalBtnLoading=!0,n(this.setting.taskId,t).then((function(t){e.$message({type:"success",message:t.msg,duration:1e3,onClose:function(){e.approvalBtnLoading=!1,e.visible=!1,e.$emit("close",!0)}})})).catch((function(){e.approvalBtnLoading=!1}))}else this.$message({message:"请签名",type:"error"})},handleReset:function(){var e=this;this.signImg="",this.$nextTick((function(){e.$refs.esign&&e.$refs.esign.reset()}))},handleGenerate:function(){var e=this;this.$refs.esign.generate().then((function(t){t&&(e.signImg=t)})).catch((function(t){e.$message({message:"请签名",type:"warning"})}))},setPageLoad:function(e){this.loading=!!e},setLoad:function(e){this.btnLoading=!!e}}},h=p,_=(n("ee05"),n("2877")),v=Object(_["a"])(h,i,a,!1,null,"5e4c1ff4",null);t["default"]=v.exports},2638:function(e,t,n){"use strict";function i(){return i=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)}var a=["attrs","props","domProps"],o=["class","style","directives"],s=["on","nativeOn"],r=function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==a.indexOf(n))e[n]=i({},e[n],t[n]);else if(-1!==o.indexOf(n)){var r=e[n]instanceof Array?e[n]:[e[n]],c=t[n]instanceof Array?t[n]:[t[n]];e[n]=r.concat(c)}else if(-1!==s.indexOf(n))for(var u in t[n])if(e[n][u]){var f=e[n][u]instanceof Array?e[n][u]:[e[n][u]],d=t[n][u]instanceof Array?t[n][u]:[t[n][u]];e[n][u]=f.concat(d)}else e[n][u]=t[n][u];else if("hook"==n)for(var m in t[n])e[n][m]=e[n][m]?l(e[n][m],t[n][m]):t[n][m];else e[n]=t[n];else e[n]=t[n];return e}),{})},l=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=r},"54b1":function(e,t,n){},"63c9":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.currentView,{directives:[{name:"show",rawName:"v-show",value:e.showPage,expression:"showPage"}],tag:"component",attrs:{config:e.config,modelId:e.modelId,isPreview:e.isPreview}})},a=[],o=(n("a481"),n("ef22")),s=n("b4b7"),r=n("7292"),l={name:"dynamicModel",components:{Form:s["default"],List:r["default"]},data:function(){return{currentView:"",showPage:!1,isPreview:!1,modelId:"",config:{}}},created:function(){var e=this.$route.query.isPreview||!1;e?(this.modelId=this.$route.query.id,this.isPreview=!0):this.modelId=this.$route.meta.relationId,this.modelId&&this.getConfigData()},methods:{getConfigData:function(){var e=this;Object(o["n"])(this.modelId).then((function(t){200!==t.code&&(e.$store.dispatch("tagsView/delView",e.$route),e.$router.replace("/404")),t.data&&(e.config=t.data,"1"==t.data.webType?e.currentView="Form":e.currentView="List",e.showPage=!0)})).catch((function(){}))}}},c=l,u=n("2877"),f=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=f.exports},7292:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"JNPF-common-layout"},[2===e.columnData.type?n("div",{staticClass:"JNPF-common-layout-left"},[e.columnData.treeTitle?n("div",{staticClass:"JNPF-common-title"},[n("h2",[e._v(e._s(e.columnData.treeTitle))])]):e._e(),n("el-tree",{ref:"treeBox",staticClass:"JNPF-common-el-tree",attrs:{data:e.treeData,props:e.treeProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"node-key":e.treeProps.value},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("i",{class:a.icon}),n("span",{staticClass:"text"},[e._v(e._s(i.label))])])}}],null,!1,1575034392)})],1):e._e(),n("div",{staticClass:"JNPF-common-layout-center"},[n("Search",{ref:"Search",attrs:{list:e.columnData.searchList},on:{reset:e.reset,search:e.search}}),n("div",{staticClass:"JNPF-common-layout-main JNPF-flex-main"},[n("div",{staticClass:"JNPF-common-head"},[e.isPreview||!e.columnData.useBtnPermission?n("div",e._l(e.columnData.btnsList,(function(t,i){return n("el-button",{key:i,attrs:{type:0==i?"primary":"text",icon:t.icon},on:{click:function(n){return e.headBtnsHandel(t.value)}}},[e._v("\n            "+e._s(t.label))])})),1):n("div",e._l(e.columnData.btnsList,(function(t,i){return n("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+t.value,expression:"'btn_'+item.value"}],key:i,attrs:{type:0==i?"primary":"text",icon:t.icon},on:{click:function(n){return e.headBtnsHandel(t.value)}}},[e._v("\n            "+e._s(t.label))])})),1),n("div",{staticClass:"JNPF-common-head-right"},[n("el-tooltip",{attrs:{effect:"dark",content:e.$t("common.refresh"),placement:"top"}},[n("el-link",{attrs:{icon:"icon-ym icon-ym-Refresh JNPF-common-head-icon",underline:!1},on:{click:function(t){return e.initData()}}})],1),n("screenfull")],1)]),e.refreshTable?n("JNPF-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:""},"has-c":e.hasBatchBtn},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[e._l(e.columnList,(function(e,t){return n("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,align:e.align,width:e.width,sortable:e.sortable?"custom":e.sortable}})})),3==e.config.webType?n("el-table-column",{attrs:{prop:"flowState",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.top?void 0:[1==t.row.flowState?n("el-tag",[e._v("等待审核")]):2==t.row.flowState?n("el-tag",{attrs:{type:"success"}},[e._v("审核通过")]):3==t.row.flowState?n("el-tag",{attrs:{type:"danger"}},[e._v("审核驳回")]):4==t.row.flowState?n("el-tag",{attrs:{type:"danger"}},[e._v("流程撤回")]):5==t.row.flowState?n("el-tag",{attrs:{type:"warning"}},[e._v("审核终止")]):n("el-tag",{attrs:{type:"info"}},[e._v("等待提交")])]}}],null,!0)}):e._e(),e.columnData.columnBtnsList.length?n("el-table-column",{attrs:{label:"操作",fixed:"right",width:50*e.columnData.columnBtnsList.length},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.top?void 0:[e.isPreview||!e.columnData.useBtnPermission?[e._l(e.columnData.columnBtnsList,(function(i,a){return["edit"==i.value?[n("el-button",{key:a,attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&[1,2,5].indexOf(t.row.flowState)>-1},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e(),"remove"==i.value?[n("el-button",{key:a,staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&[1,2,3,5].indexOf(t.row.flowState)>-1},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e(),"detail"==i.value?[n("el-button",{key:a,attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&!t.row.flowState},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e()]}))]:[e._l(e.columnData.columnBtnsList,(function(i,a){return["edit"==i.value?[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+i.value,expression:"'btn_'+item.value"}],key:a,attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&[1,2,5].indexOf(t.row.flowState)>-1},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e(),"remove"==i.value?[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+i.value,expression:"'btn_'+item.value"}],key:a,staticClass:"JNPF-table-delBtn",attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&[1,2,3,5].indexOf(t.row.flowState)>-1},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e(),"detail"==i.value?[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"btn_"+i.value,expression:"'btn_'+item.value"}],key:a,attrs:{size:"mini",type:"text",disabled:3==e.config.webType&&!t.row.flowState},on:{click:function(n){return e.columnBtnsHandel(i.value,t.row)}}},[e._v("\n                    "+e._s(i.label))])]:e._e()]}))]]}}],null,!0)}):e._e()],2):e._e(),3!==e.columnData.type&&e.columnData.hasPage?[n("pagination",{attrs:{total:e.total,page:e.listQuery.currentPage,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.initData}})]:e._e()],2)],1),e.flowVisible?n("FlowBox",{ref:"FlowBox",on:{close:e.colseFlow}}):e._e(),n("Form",{directives:[{name:"show",rawName:"v-show",value:e.formVisible,expression:"formVisible"}],ref:"Form",on:{refreshDataList:e.refresh}}),n("Detail",{directives:[{name:"show",rawName:"v-show",value:e.detailVisible,expression:"detailVisible"}],ref:"Detail",on:{close:function(t){e.detailVisible=!1}}}),e.exportBoxVisible?n("ExportBox",{ref:"ExportBox",on:{download:e.download}}):e._e()],1)},a=[],o=n("5530"),s=(n("386d"),n("ade3")),r=(n("55dd"),n("ef22")),l=n("9b6f"),c=n("17de"),u=n("ba53"),f=n("226a"),d=n("841b"),m=n("e16c"),p=n("20f7"),h={name:"dynamicModel",components:{Form:u["default"],ExportBox:m["default"],Search:p["default"],Detail:d["default"],FlowBox:f["default"]},props:["config","modelId","isPreview"],data:function(){return{keyword:"",treeProps:{children:"children",label:"fullName",value:"id"},list:[],total:0,listLoading:!1,listQuery:{currentPage:1,pageSize:20,sort:"desc",sidx:"",json:""},flowVisible:!1,formVisible:!1,detailVisible:!1,importBoxVisible:!1,exportBoxVisible:!1,treeData:[],treeActiveId:"",columnData:{columnBtnsList:[]},formData:{},columnList:[],hasBatchBtn:!1,refreshTable:!0,multipleSelection:[]}},created:function(){this.init()},methods:{init:function(){var e=this;this.refreshTable=!1,this.config.columnData&&this.config.formData&&(this.columnData=JSON.parse(this.config.columnData),3===this.columnData.type&&(this.columnData.columnList=this.columnData.columnList.filter((function(t){return t.prop!=e.columnData.groupField}))),this.hasBatchBtn=this.columnData.btnsList.some((function(e){return"batchRemove"==e.value})),this.$nextTick((function(){e.refreshTable=!0})),this.formData=JSON.parse(this.config.formData),this.getColumnList(),this.isPreview||(this.listQuery.pageSize=this.columnData.pageSize,this.listQuery.sort=this.columnData.sort,this.listQuery.sidx=this.columnData.defaultSidx,3!==this.columnData.type&&this.columnData.hasPage||(this.listQuery.pageSize=1e4),2===this.columnData.type?(this.treeProps.value=this.columnData.treePropsValue||"id",this.treeProps.label=this.columnData.treePropsLabel||"fullName",this.treeProps.children=this.columnData.treePropsChildren||"children",this.getTreeView()):this.initData()))},initData:function(){var e=this;this.isPreview||(this.listLoading=!0,Object(r["t"])(this.modelId,this.listQuery).then((function(t){e.list=t.data.list,3!==e.columnData.type&&e.columnData.hasPage&&(e.total=t.data.pagination.total),e.listLoading=!1})))},getTreeView:function(){var e=this;if("dictionary"===this.columnData.treeDataSource){if(!this.columnData.treeDictionary)return;Object(l["i"])(this.columnData.treeDictionary).then((function(t){e.treeData=t.data.list,e.initData()}))}if("organize"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getCompanyTree").then((function(t){e.treeData=t,e.initData()})),"department"===this.columnData.treeDataSource&&this.$store.dispatch("generator/getDepTree").then((function(t){e.treeData=t,e.initData()})),"api"===this.columnData.treeDataSource){if(!this.columnData.treePropsUrl)return;Object(c["i"])(this.columnData.treePropsUrl).then((function(t){Array.isArray(t.data)?e.treeData=t.data:e.treeData=[],e.initData()}))}},getColumnList:function(){if(this.isPreview||!this.columnData.useColumnPermission)this.columnList=this.columnData.columnList;else{for(var e=this.$store.getters.permissionList,t=this.$route.meta.modelId,n=e.filter((function(e){return e.modelId===t})),i=n[0]&&n[0].column?n[0].column:[],a=[],o=0;o<i.length;o++)e:for(var s=0;s<this.columnData.columnList.length;s++)if(i[o].enCode===this.columnData.columnList[s].prop){a.push(this.columnData.columnList[s]);break e}this.columnList=a}},handleNodeClick:function(e){if(this.treeActiveId!=e[this.treeProps.value]){this.treeActiveId=e[this.treeProps.value],this.$refs.Search.treeReset();var t=Object(s["a"])({},this.columnData.treeRelation,e[this.treeProps.value]);this.search(JSON.stringify(t))}},handleDel:function(e){var t=this;this.$confirm(this.$t("common.delTip"),this.$t("common.tipTitle"),{type:"warning"}).then((function(){Object(r["i"])(t.modelId,e).then((function(e){t.$message({type:"success",message:e.msg,duration:1e3,onClose:function(){t.initData()}})}))})).catch((function(){}))},addOrUpdateHandle:function(e,t){var n=this;if(3==this.config.webType){var i={id:e||"",enCode:this.config.flowEnCode,flowId:this.config.flowId,formType:2,type:1,opType:"-1",modelId:this.modelId,isPreview:this.isPreview};this.flowVisible=!0,this.$nextTick((function(){n.$refs.FlowBox.init(i)}))}else this.formVisible=!0,this.$nextTick((function(){n.$refs.Form.init(n.formData,n.modelId,e,n.isPreview)}))},headBtnsHandel:function(e){var t=this;"add"===e&&this.addOrUpdateHandle(),"download"==e&&(this.exportBoxVisible=!0,this.$nextTick((function(){t.$refs.ExportBox.init(t.columnList)}))),this.isPreview||"batchRemove"===e&&this.batchRemove()},handleSelectionChange:function(e){var t=e.map((function(e){return e.id}));this.multipleSelection=t},batchRemove:function(){var e=this;this.multipleSelection.length?this.$confirm("您确定要删除这些数据吗, 是否继续？","提示",{type:"warning"}).then((function(){Object(r["g"])(e.modelId,e.multipleSelection).then((function(t){e.$message({type:"success",message:t.msg,duration:1500,onClose:function(){e.initData()}})}))})).catch((function(){})):this.$message({type:"error",message:"请选择一条数据",duration:1500})},download:function(e){var t=this;if(this.isPreview)return this.$message({message:"功能预览不支持数据导出",type:"warning"});var n=Object(o["a"])(Object(o["a"])({},this.listQuery),e);Object(r["l"])(this.modelId,n).then((function(e){e.data.url&&(window.location.href=t.define.comUrl+e.data.url,t.$refs.ExportBox.visible=!1,t.exportBoxVisible=!1)}))},columnBtnsHandel:function(e,t){"edit"===e&&this.addOrUpdateHandle(t.id),"detail"===e&&this.goDetail(t.id,t.flowState),"remove"==e&&this.handleDel(t.id)},goDetail:function(e,t){var n=this;if(3==this.config.webType){var i={id:e,enCode:this.config.flowEnCode,flowId:this.config.flowId,formType:2,type:1,opType:0,modelId:this.modelId,isPreview:this.isPreview,status:t};this.flowVisible=!0,this.$nextTick((function(){n.$refs.FlowBox.init(i)}))}else this.detailVisible=!0,this.$nextTick((function(){n.$refs.Detail.init(n.formData,n.modelId,e)}))},sortChange:function(e){e.column;var t=e.prop,n=e.order;this.listQuery.sort="ascending"==n?"asc":"desc",this.listQuery.sidx=n?t:"",this.initData()},refresh:function(e){this.formVisible=!1,e&&this.initData()},colseFlow:function(e){this.flowVisible=!1,e&&this.initData()},reset:function(){this.listQuery.sort="desc",this.listQuery.sidx="",this.$refs.Search.reset()},search:function(e){this.isPreview||(e||this.$refs.treeBox&&this.$refs.treeBox.setCurrentKey(null),this.listQuery.json=e,this.listQuery.currentPage=1,this.initData())}}},_=h,v=n("2877"),g=Object(v["a"])(_,i,a,!1,null,null,null);t["default"]=g.exports},7361:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return r}));var i=n("b775");function a(e){return Object(i["a"])({url:"/api/workflow/Engine/FlowLaunch",method:"get",data:e})}function o(e){return Object(i["a"])({url:"/api/workflow/Engine/FlowLaunch/".concat(e),method:"DELETE"})}function s(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowLaunch/".concat(e,"/Actions/Withdraw"),method:"PUT",data:t})}function r(e){return Object(i["a"])({url:"/api/workflow/Engine/FlowLaunch/Press/".concat(e),method:"post"})}},"826a":function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c}));n("a481");var i=n("b775");function a(e,t){return e=e.replace(e[0],e[0].toUpperCase()),Object(i["a"])({url:"/api/workflow/Form/".concat(e,"/").concat(t),method:"get"})}function o(e,t){return e=e.replace(e[0],e[0].toUpperCase()),Object(i["a"])({url:"/api/workflow/Form/".concat(e),method:"post",data:t})}function s(e,t){return e=e.replace(e[0],e[0].toUpperCase()),Object(i["a"])({url:"/api/workflow/Form/".concat(e,"/").concat(t.id),method:"put",data:t})}function r(e){return Object(i["a"])({url:"/api/workflow/Engine/FlowTask/".concat(e),method:"get"})}function l(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowTask",method:"post",data:t})}function c(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowTask/".concat(t.id),method:"put",data:t})}},"841b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["general"===e.formData.popupType?[n("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:"详情","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:e.formData.generalWidth,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading||e.mainLoading,expression:"loading || mainLoading"}],staticClass:"dynamicDetail",attrs:{"element-loading-text":e.$t("common.loadingText")}},[e.loading?e._e():n("Parser",{attrs:{formConf:e.formData,relationData:e.relationData},on:{toDetail:e.toDetail}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))])],1)])]:e._e(),"fullScreen"===e.formData.popupType?[n("transition",{attrs:{name:"el-zoom-in-center"}},[n("div",{staticClass:"JNPF-preview-main"},[n("div",{staticClass:"JNPF-common-page-header"},[n("el-page-header",{attrs:{content:"详情"},on:{back:e.goBack}}),n("div",{staticClass:"options"},[n("el-button",{on:{click:e.goBack}},[e._v(e._s(e.$t("common.cancelButton")))])],1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading||e.mainLoading,expression:"loading || mainLoading"}],staticClass:"dynamic-form-main dynamicDetail",style:{margin:"0 auto",width:e.formData.fullScreenWidth},attrs:{"element-loading-text":e.$t("common.loadingText")}},[e.loading?e._e():n("Parser",{attrs:{formConf:e.formData,relationData:e.relationData},on:{toDetail:e.toDetail}})],1)])])]:e._e(),e.detailVisible?n("Detail",{ref:"Detail",on:{close:function(t){e.detailVisible=!1}}}):e._e()],2)},a=[],o=(n("ac6a"),n("5df3"),n("f400"),n("ef22")),s=n("ed08"),r=n("cb1d"),l={name:"Detail",components:{Parser:r["default"]},data:function(){return{visible:!1,dataForm:{id:"",data:""},modelId:"",formData:{},formValue:{},loading:!0,mainLoading:!1,detailVisible:!1,relationData:{}}},methods:{goBack:function(){this.$emit("close")},init:function(e,t,n){var i=this;this.formData=Object(s["b"])(e),this.modelId=t,this.dataForm.id=n||"",this.loading=!0,this.relationData={},this.$nextTick((function(){i.dataForm.id?Object(o["o"])(t,i.dataForm.id).then((function(e){i.dataForm=e.data,i.dataForm.data&&(i.formValue=JSON.parse(i.dataForm.data),i.fillFormData(i.formData,i.formValue),i.visible=!0)})):(i.formValue={},i.loading=!1,i.visible=!1,i.$emit("close"))}))},unique:function(e,t){var n=new Map;return e.filter((function(e){return!n.has(e[t])&&n.set(e[t],1)}))},handleAttrList:function(e){for(var t=this,n=this.unique(e,"relationField"),i=function(e){var i=n[e],a="",s="",r="",l=function e(t){for(var n=0;n<t.length;n++){if(i.relationField===t[n].__vModel__){a=t[n].modelId,s=t[n].__config__.defaultValue,r=t[n].__vModel__;break}t[n].__config__&&"table"!==t[n].__config__.jnpfKey&&t[n].__config__.children&&Array.isArray(t[n].__config__.children)&&e(t[n].__config__.children)}};if(l(t.formData.fields),!s)return t.$set(t.relationData,r,""),"continue";Object(o["o"])(a,s).then((function(e){if(e.data&&e.data.data){var n=JSON.parse(e.data.data);t.$set(t.relationData,r,n)}else t.$set(t.relationData,r,"")})).catch((function(){t.$set(t.relationData,r,"")}))},a=0;a<n.length;a++)i(a)},toDetail:function(e){var t=this;e.__config__.defaultValue&&(this.mainLoading=!0,Object(o["n"])(e.modelId).then((function(n){if(t.mainLoading=!1,n.data&&n.data.formData){var i=JSON.parse(n.data.formData);i.popupType=t.formData.popupType,t.detailVisible=!0,t.$nextTick((function(){t.$refs.Detail.init(i,e.modelId,e.__config__.defaultValue)}))}})).catch((function(){t.mainLoading=!1})))},fillFormData:function(e,t){var n=this,i=[],a=function e(a){for(var o=0;o<a.length;o++){var s=a[o];if(s.__vModel__)if("relationForm"===s.__config__.jnpfKey){var r=t[s.__vModel__+"_id"];r&&(s.__config__.defaultValue=r),n.$set(s,"name",t[s.__vModel__]||"")}else{var l=t[s.__vModel__];l&&(s.__config__.defaultValue=l)}"relationFormAttr"===s.__config__.jnpfKey&&i.push(s),s.__config__&&"table"!==s.__config__.jnpfKey&&s.__config__.children&&Array.isArray(s.__config__.children)&&e(s.__config__.children)}};a(e.fields),this.handleAttrList(i),this.loading=!1}}},c=l,u=n("2877"),f=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=f.exports},"89a2":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{class:{"item-card":"card"===e.item.__config__.jnpfKey,"item-table":"table"===e.item.__config__.jnpfKey},attrs:{span:e.item.__config__.span}},["colFormItem"===e.item.__config__.layout?["divider"===e.item.__config__.jnpfKey?[n("el-divider",{attrs:{"content-position":e.item["content-position"]}},[e._v(e._s(e.item.__slot__.default)+"\n      ")])]:"JNPFText"===e.item.__config__.jnpfKey?[n("el-form-item",{attrs:{"label-width":"0"}},[n("JNPFText",{attrs:{lineHeight:e.item.lineHeight,fontSize:e.item.fontSize,textStyle:e.item.textStyle},model:{value:e.item.__config__.defaultValue,callback:function(t){e.$set(e.item.__config__,"defaultValue",t)},expression:"item.__config__.defaultValue"}})],1)]:"groupTitle"===e.item.__config__.jnpfKey?[n("el-form-item",{attrs:{"label-width":"0"}},[n("groupTitle",{attrs:{content:e.item.content,"content-position":e.item["content-position"]}})],1)]:[e.item.__config__.noShow?e._e():n("el-form-item",{attrs:{prop:e.item.__vModel__,"label-width":e.item.__config__.labelWidth?e.item.__config__.labelWidth+"px":null,label:e.item.__config__.showLabel?e.item.__config__.label:""}},["uploadFz"===e.item.__config__.jnpfKey?[n("div",{staticClass:"dy-fileList"},e._l(e.item.__config__.defaultValue,(function(t,i){return n("el-link",{key:i,staticClass:"dy-fileList-item",attrs:{underline:!1},on:{click:function(n){return e.downloadFile(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n            ")])})),1)]:"uploadImg"===e.item.__config__.jnpfKey?e._l(e.item.__config__.defaultValue,(function(t,i){return n("el-image",{key:i,staticClass:"dy-img",attrs:{src:e.define.comUrl+t.url,"preview-src-list":e.getImgList(e.item.__config__.defaultValue),"z-index":1e4}})})):"colorPicker"===e.item.__config__.jnpfKey?[n("el-color-picker",{attrs:{"show-alpha":e.item["show-alpha"],"color-format":e.item["color-format"],size:e.item.size,disabled:""},model:{value:e.item.__config__.defaultValue,callback:function(t){e.$set(e.item.__config__,"defaultValue",t)},expression:"item.__config__.defaultValue"}})]:"rate"===e.item.__config__.jnpfKey?[n("el-rate",{attrs:{max:e.item.max,"allow-half":e.item["allow-half"],"show-text":e.item["show-text"],"show-score":e.item["show-score"],disabled:""},model:{value:e.item.__config__.defaultValue,callback:function(t){e.$set(e.item.__config__,"defaultValue",t)},expression:"item.__config__.defaultValue"}})]:"switch"===e.item.__config__.jnpfKey?[n("el-switch",{attrs:{"active-value":e.item["active-value"],"active-color":e.item["active-color"],"active-text":e.item["active-text"],"inactive-color":e.item["inactive-color"],"inactive-text":e.item["inactive-text"],"inactive-value":e.item["inactive-value"],disabled:""},model:{value:e.item.__config__.defaultValue,callback:function(t){e.$set(e.item.__config__,"defaultValue",t)},expression:"item.__config__.defaultValue"}})]:"slider"===e.item.__config__.jnpfKey?[n("div",{staticClass:"slider-box"},[n("el-slider",{attrs:{range:e.item.range,"show-stops":e.item["show-stops"]},model:{value:e.item.__config__.defaultValue,callback:function(t){e.$set(e.item.__config__,"defaultValue",t)},expression:"item.__config__.defaultValue"}}),n("div",{staticClass:"slider-mark"})],1)]:"editor"===e.item.__config__.jnpfKey?[n("div",{domProps:{innerHTML:e._s(e.item.__config__.defaultValue)}})]:"relationForm"===e.item.__config__.jnpfKey?[n("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(t){return e.toDetail(e.item)}}},[e._v("\n            "+e._s(e.item.name))])]:"relationFormAttr"===e.item.__config__.jnpfKey?[n("p",{staticClass:"dynamicDetail-text"},[e._v("\n            "+e._s(e.relationData[e.item.relationField]&&e.relationData[e.item.relationField][e.item.showField]?e.relationData[e.item.relationField][e.item.showField]:"")+"\n          ")])]:[n("p",{staticClass:"dynamicDetail-text"},[e._v(e._s(e.getValue(e.item)))])]],2)]]:["card"===e.item.__config__.jnpfKey?[n("el-card",{staticClass:"mb-20",attrs:{shadow:e.item.shadow,header:e.item.header}},e._l(e.item.__config__.children,(function(t,i){return n("Item",e._g(e._b({key:i,attrs:{item:t}},"Item",e.$props,!1),e.$listeners))})),1)]:e._e(),"row"===e.item.__config__.jnpfKey?[n("el-row",{attrs:{gutter:e.formConf.gutter}},e._l(e.item.__config__.children,(function(t,i){return n("Item",e._g(e._b({key:i,attrs:{item:t}},"Item",e.$props,!1),e.$listeners))})),1)]:e._e(),"table"===e.item.__config__.jnpfKey?[n("el-form-item",{attrs:{"label-width":"0"}},[e.item.__config__.showTitle?n("div",{staticClass:"JNPF-common-title"},[n("h2",[e._v(e._s(e.item.__config__.label))])]):e._e(),n("JNPF-table",{attrs:{data:e.item.__config__.defaultValue}},[e._l(e.item.__config__.children,(function(t,i){return["relationForm"===t.__config__.jnpfKey?n("el-table-column",{key:i,attrs:{prop:t.__vModel__,label:t.__config__.label},scopedSlots:e._u([{key:"default",fn:function(i){return[n("el-link",{attrs:{underline:!1,type:"primary"},nativeOn:{click:function(n){return e.toTableDetail(t,i.row[t.__vModel__+"_id"])}}},[e._v("\n                  "+e._s(i.row[t.__vModel__]))])]}}],null,!0)}):n("el-table-column",{key:i,attrs:{prop:t.__vModel__,label:t.__config__.label}})]}))],2)],1)]:e._e(),"tab"===e.item.__config__.jnpfKey?[n("el-tabs",{staticClass:"mb-10",attrs:{type:e.item.type,"tab-position":e.item["tab-position"]},model:{value:e.item.__config__.active,callback:function(t){e.$set(e.item.__config__,"active",t)},expression:"item.__config__.active"}},e._l(e.item.__config__.children,(function(t,i){return n("el-tab-pane",{key:i,attrs:{label:t.title}},e._l(t.__config__.children,(function(t,i){return n("Item",e._g(e._b({key:i,attrs:{item:t}},"Item",e.$props,!1),e.$listeners))})),1)})),1)]:e._e(),"collapse"===e.item.__config__.jnpfKey?[n("el-collapse",{staticClass:"mb-20",attrs:{accordion:e.item.accordion},model:{value:e.item.__config__.active,callback:function(t){e.$set(e.item.__config__,"active",t)},expression:"item.__config__.active"}},e._l(e.item.__config__.children,(function(t,i){return n("el-collapse-item",{key:i,attrs:{title:t.title,name:t.name}},e._l(t.__config__.children,(function(t,i){return n("Item",e._g(e._b({key:i,attrs:{item:t}},"Item",e.$props,!1),e.$listeners))})),1)})),1)]:e._e()]],2)},a=[],o=(n("6762"),n("2fdb"),n("2934")),s={name:"Item",props:{item:{type:Object,required:!0},formConf:{type:Object,required:!0},relationData:{type:Object,default:function(){}}},methods:{toDetail:function(e){this.$emit("toDetail",e)},toTableDetail:function(e,t){e.__config__.defaultValue=t,this.$emit("toDetail",e)},downloadFile:function(e){var t=this;e.fileId&&Object(o["a"])("annex",e.fileId).then((function(e){e.data.url&&(window.location.href=t.define.comUrl+e.data.url)}))},getImgList:function(e){var t=this,n=e.map((function(e){return t.define.comUrl+e.url}));return n},getValue:function(e){return Array.isArray(e.__config__.defaultValue)?["timeRange","dateRange"].includes(e.__config__.jnpfKey)?e.__config__.defaultValue.join(""):e.__config__.defaultValue.join():e.__config__.defaultValue}}},r=s,l=n("2877"),c=Object(l["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},afcb:function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,(function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=1)}([function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.a={props:{width:{type:Number,default:document.body.offsetWidth},height:{type:Number,default:500},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1}},data:function(){return{hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}},computed:{ratio:function(){return this.height/this.width},stageInfo:function(){return this.$refs.canvas.getBoundingClientRect()},myBg:function(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(e){this.$refs.canvas.style.background=e}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var e=this,t=this.$refs.canvas;t.height=this.height,t.width=this.width,t.style.background=this.myBg,this.$_resizeHandler(),document.onmouseup=function(){e.isDrawing=!1}},methods:{$_resizeHandler:function(){var e=this.$refs.canvas;e.style.width=this.width+"px";var t=parseFloat(window.getComputedStyle(e).width);e.style.height=this.ratio*t+"px",this.canvasTxt=e.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=t/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},mouseDown:function(e){e=e||event,e.preventDefault(),this.isDrawing=!0,this.hasDrew=!0;var t={x:e.offsetX,y:e.offsetY};this.drawStart(t)},mouseMove:function(e){if(e=e||event,e.preventDefault(),this.isDrawing){var t={x:e.offsetX,y:e.offsetY};this.drawMove(t)}},mouseUp:function(e){e=e||event,e.preventDefault();var t={x:e.offsetX,y:e.offsetY};this.drawEnd(t),this.isDrawing=!1},touchStart:function(e){if(e=e||event,e.preventDefault(),this.hasDrew=!0,1===e.touches.length){var t={x:e.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:e.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(t)}},touchMove:function(e){if(e=e||event,e.preventDefault(),1===e.touches.length){var t={x:e.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:e.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(t)}},touchEnd:function(e){if(e=e||event,e.preventDefault(),1===e.touches.length){var t={x:e.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:e.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(t)}},drawStart:function(e){this.startX=e.x,this.startY=e.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e)},drawMove:function(e){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=e.y,this.startX=e.x,this.points.push(e)},drawEnd:function(e){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e),this.points.push({x:-1,y:-1})},generate:function(){var e=this;return new Promise((function(t,n){if(e.hasDrew){var a=e.canvasTxt.getImageData(0,0,e.$refs.canvas.width,e.$refs.canvas.height);e.canvasTxt.globalCompositeOperation="destination-over",e.canvasTxt.fillStyle=e.myBg,e.canvasTxt.fillRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.resultImg=e.$refs.canvas.toDataURL();var o=e.resultImg;if(e.canvasTxt.clearRect(0,0,e.$refs.canvas.width,e.$refs.canvas.height),e.canvasTxt.putImageData(a,0,0),e.canvasTxt.globalCompositeOperation="source-over",e.isCrop){var s,r=e.getCropArea(a.data),l=document.createElement("canvas"),c=l.getContext("2d");l.width=r[2]-r[0],l.height=r[3]-r[1];var u=(s=e.canvasTxt).getImageData.apply(s,i(r));c.globalCompositeOperation="destination-over",c.putImageData(u,0,0),c.fillStyle=e.myBg,c.fillRect(0,0,l.width,l.height),o=l.toDataURL(),l=null}t(o)}else n("Warning: Not Signned!")}))},reset:function(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)",this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea:function(e){for(var t=this.$refs.canvas.width,n=0,i=this.$refs.canvas.height,a=0,o=0;o<this.$refs.canvas.width;o++)for(var s=0;s<this.$refs.canvas.height;s++){var r=4*(o+this.$refs.canvas.width*s);(e[r]>0||e[r+1]>0||e[r+2]||e[r+3]>0)&&(a=Math.max(s,a),n=Math.max(o,n),i=Math.min(s,i),t=Math.min(o,t))}return t++,n++,i++,a++,[t,i,n,a]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);i.a.install=function(e){this.installed||(this.installed=!0,e.component("vueEsign",i.a))},t.default=i.a,"undefined"!=typeof window&&window.Vue&&window.Vue.use(i.a)},function(e,t,n){"use strict";function i(e){n(3)}var a=n(0),o=n(9),s=n(8),r=i,l=s(a.a,o.a,!1,r,"data-v-25d47434",null);t.a=l.exports},function(e,t,n){var i=n(4);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(6)("4828dc1e",i,!0,{})},function(e,t,n){t=e.exports=n(5)(!1),t.push([e.i,"canvas[data-v-25d47434]{max-width:100%;display:block}",""])},function(e,t){function n(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var o=i(a);return[n].concat(a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}))).concat([o]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=u[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(o(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(o(n.parts[a]));u[n.id]={id:n.id,refs:1,parts:s}}}}function a(){var e=document.createElement("style");return e.type="text/css",f.appendChild(e),e}function o(e){var t,n,i=document.querySelector("style["+v+'~="'+e.id+'"]');if(i){if(p)return h;i.parentNode.removeChild(i)}if(g){var o=m++;i=d||(d=a()),t=s.bind(null,i,o,!1),n=s.bind(null,i,o,!0)}else i=a(),t=r.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function s(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function r(e,t){var n=t.css,i=t.media,a=t.sourceMap;if(i&&e.setAttribute("media",i),_.ssrId&&e.setAttribute(v,t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(7),u={},f=l&&(document.head||document.getElementsByTagName("head")[0]),d=null,m=0,p=!1,h=function(){},_=null,v="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n,a){p=n,_=a||{};var o=c(e,t);return i(o),function(t){for(var n=[],a=0;a<o.length;a++){var s=o[a],r=u[s.id];r.refs--,n.push(r)}t?(o=c(e,t),i(o)):o=[];for(a=0;a<n.length;a++){r=n[a];if(0===r.refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete u[r.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var n=[],i={},a=0;a<t.length;a++){var o=t[a],s=o[0],r=o[1],l=o[2],c=o[3],u={id:e+":"+a,css:r,media:l,sourceMap:c};i[s]?i[s].parts.push(u):n.push(i[s]={id:s,parts:[u]})}return n}},function(e,t){e.exports=function(e,t,n,i,a,o){var s,r=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(s=e,r=e.default);var c,u="function"==typeof r?r.options:r;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),a&&(u._scopeId=a),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=c):i&&(c=i),c){var f=u.functional,d=f?u.render:u.beforeCreate;f?(u._injectStyles=c,u.render=function(e,t){return c.call(t),d(e,t)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:s,exports:r,options:u}}},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("canvas",{ref:"canvas",on:{mousedown:e.mouseDown,mousemove:e.mouseMove,mouseup:e.mouseUp,touchstart:e.touchStart,touchmove:e.touchMove,touchend:e.touchEnd}})},a=[],o={render:i,staticRenderFns:a};t.a=o}])}))},b4b7:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"JNPF-common-layout"},[n("div",{staticClass:"JNPF-preview-main"},[n("div",{staticClass:"JNPF-common-page-header"},[n("p",[e._v(e._s(e.config.fullName))]),n("div",{staticClass:"options"},[n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n          "+e._s(e.formData.confirmButtonText||"确 定"))]),n("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)]),n("div",{staticClass:"dynamic-form-main",style:{margin:"0 auto",width:e.formData.fullScreenWidth}},[e.loading?e._e():n("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formData},on:{submit:e.sumbitForm}})],1)])])},a=[],o=n("ef22"),s=n("49aa"),r={components:{Parser:s["a"]},props:["config","modelId","isPreview"],data:function(){return{visible:!1,dataForm:{data:""},formData:{},key:+new Date,btnLoading:!1,loading:!0}},created:function(){this.init()},methods:{init:function(){var e=this;this.formData=JSON.parse(this.config.formData),this.loading=!0,this.$nextTick((function(){e.visible=!0,e.loading=!1,e.key=+new Date}))},sumbitForm:function(e){var t=this;e&&(this.btnLoading=!0,this.dataForm.data=JSON.stringify(e),Object(o["h"])(this.modelId,this.dataForm).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.btnLoading=!1,t.resetForm()}})})).catch((function(){t.btnLoading=!1})))},dataFormSubmit:function(){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()},resetForm:function(){this.$refs.dynamicForm&&this.$refs.dynamicForm.resetForm()}}},l=r,c=n("2877"),u=Object(c["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},b952:function(e,t,n){var i={"./el-button.js":"6700","./el-checkbox-group.js":"914c","./el-divider.js":"2a5c","./el-input.js":"518b","./el-radio-group.js":"9169","./el-select.js":"3f02"};function a(e){var t=o(e);return n(t)}function o(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="b952"},ba53:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["general"===e.formData.popupType?[n("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center",attrs:{title:e.dataForm.id?"编辑":"新建","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:e.formData.generalWidth},on:{"update:visible":function(t){e.visible=t}}},[e.loading?e._e():n("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formData},on:{submit:e.sumbitForm}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.formData.cancelButtonText||"取 消"))]),n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n          "+e._s(e.formData.confirmButtonText||"确 定"))])],1)],1)]:e._e(),"fullScreen"===e.formData.popupType?[n("transition",{attrs:{name:"el-zoom-in-center"}},[n("div",{staticClass:"JNPF-preview-main"},[n("div",{staticClass:"JNPF-common-page-header"},[n("el-page-header",{attrs:{content:e.dataForm.id?"编辑":"新建"},on:{back:e.goBack}}),n("div",{staticClass:"options"},[n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("\n              "+e._s(e.formData.confirmButtonText||"确 定"))]),n("el-button",{on:{click:e.goBack}},[e._v(e._s(e.formData.cancelButtonText||"取 消"))])],1)],1),n("div",{staticClass:"dynamic-form-main",style:{margin:"0 auto",width:e.formData.fullScreenWidth}},[e.loading?e._e():n("parser",{key:e.key,ref:"dynamicForm",attrs:{"form-conf":e.formData},on:{submit:e.sumbitForm}})],1)])])]:e._e()],2)},a=[],o=n("ef22"),s=n("49aa"),r=n("ed08"),l={components:{Parser:s["a"]},data:function(){return{visible:!1,dataForm:{id:"",data:""},modelId:"",formData:{},formValue:{},key:+new Date,btnLoading:!1,loading:!0,isPreview:!1}},methods:{goBack:function(){this.$emit("refreshDataList")},init:function(e,t,n,i){var a=this;this.formData=Object(r["b"])(e),this.modelId=t,this.isPreview=i,this.dataForm.id=n||"",this.loading=!0,this.$nextTick((function(){a.dataForm.id?Object(o["s"])(t,a.dataForm.id).then((function(e){a.dataForm=e.data,a.dataForm.data&&(a.formValue=JSON.parse(a.dataForm.data),a.fillFormData(a.formData,a.formValue),a.$nextTick((function(){a.visible=!0,a.loading=!1})))})):(a.formValue={},a.visible=!0,a.loading=!1),a.key=+new Date}))},fillFormData:function(e,t){var n=function e(n){for(var i=0;i<n.length;i++){var a=n[i];if(a.__vModel__){var o=t[a.__vModel__];o&&(a.__config__.defaultValue=o)}a.__config__&&"table"!==a.__config__.jnpfKey&&a.__config__.children&&Array.isArray(a.__config__.children)&&e(a.__config__.children)}};n(e.fields)},sumbitForm:function(e){var t=this;if(e){this.btnLoading=!0,this.dataForm.data=JSON.stringify(e);var n=this.dataForm.id?o["x"]:o["h"];n(this.modelId,this.dataForm).then((function(e){t.$message({message:e.msg,type:"success",duration:1500,onClose:function(){t.visible=!1,t.btnLoading=!1,t.$emit("refreshDataList",!0)}})})).catch((function(){t.btnLoading=!1}))}},dataFormSubmit:function(){if(this.isPreview)return this.$message({message:"功能预览不支持数据保存",type:"warning"});this.$refs.dynamicForm&&this.$refs.dynamicForm.submitForm()}}},c=l,u=n("2877"),f=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=f.exports},bee2:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return a}))},cb1d:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{class:e.formConf.formStyle?e.formConf.formStyle+" word-from-detail":"",attrs:{gutter:e.formConf.gutter}},[n("el-form",{ref:e.formConf.formRef,attrs:{size:e.formConf.size,"label-position":e.formConf.labelPosition,"label-width":e.formConf.labelWidth+"px"}},e._l(e.formConf.fields,(function(t,i){return n("Item",e._g(e._b({key:i,attrs:{item:t}},"Item",e.$props,!1),e.$listeners))})),1)],1)},a=[],o=n("89a2"),s={components:{Item:o["default"]},props:{formConf:{type:Object,required:!0},relationData:{type:Object,default:function(){}},loading:{type:Boolean,default:!1}}},r=s,l=n("2877"),c=Object(l["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},ce76:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{staticStyle:{"padding-left":"20px",overflow:"auto"},attrs:{span:18}},[n("el-timeline",{attrs:{reverse:""}},[e._l(e.list,(function(t,i){return[2==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("p",{staticClass:"timeline-cell"},[e._v("发起人："+e._s(t.userName))])])],1):3==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("p",{staticClass:"timeline-cell"},[e._v("撤回节点："+e._s(t.nodeName))]),n("p",{staticClass:"timeline-cell"},[e._v("撤回人员："+e._s(t.userName))]),n("p",{staticClass:"timeline-cell"},[e._v("撤回原因："+e._s(t.handleOpinion))])])],1):4==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:18}},[n("p",{staticClass:"timeline-cell"},[e._v("审核节点："+e._s(t.nodeName))])]),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"timeline-cell",staticStyle:{"text-align":"right"}},[n("el-link",{attrs:{underline:!1,type:"danger"}},[e._v("流程终止")])],1)])],1),n("p",{staticClass:"timeline-cell"},[e._v("执行人员："+e._s(t.userName))]),n("p",{staticClass:"timeline-cell"},[e._v("执行动作：终止")]),n("p",{staticClass:"timeline-cell"},[e._v("终止原因："+e._s(t.handleOpinion))])],1)],1):5==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:18}},[n("p",{staticClass:"timeline-cell"},[e._v("审核节点："+e._s(t.nodeName))])]),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"timeline-cell",staticStyle:{"text-align":"right"}},[n("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("流程指派")])],1)])],1),n("p",{staticClass:"timeline-cell"},[e._v("执行人员："+e._s(t.userName))]),n("p",{staticClass:"timeline-cell"},[e._v("执行动作：指派")]),n("p",{staticClass:"timeline-cell"},[e._v("指派人员："+e._s(t.operatorId))])],1)],1):6==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:18}},[n("p",{staticClass:"timeline-cell"},[e._v("审核节点："+e._s(t.nodeName))])]),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"timeline-cell",staticStyle:{"text-align":"right"}},[n("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("流程加签")])],1)])],1),n("p",{staticClass:"timeline-cell"},[e._v("执行人员："+e._s(t.userName))]),n("p",{staticClass:"timeline-cell"},[e._v("执行动作：加签")]),n("p",{staticClass:"timeline-cell"},[e._v("加签人员："+e._s(t.operatorId))])],1)],1):7==t.handleStatus?n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:18}},[n("p",{staticClass:"timeline-cell"},[e._v("审核节点："+e._s(t.nodeName))])]),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"timeline-cell",staticStyle:{"text-align":"right"}},[n("el-link",{attrs:{underline:!1,type:"primary"}},[e._v("流程转办")])],1)])],1),n("p",{staticClass:"timeline-cell"},[e._v("执行人员："+e._s(t.userName))]),n("p",{staticClass:"timeline-cell"},[e._v("执行动作：转办")]),n("p",{staticClass:"timeline-cell"},[e._v("转办人员："+e._s(t.operatorId))])],1)],1):n("el-timeline-item",{key:i,attrs:{timestamp:e._f("toDate")(t.handleTime),placement:"top"}},[n("el-card",[n("el-row",[n("el-col",{attrs:{span:18}},[n("p",{staticClass:"timeline-cell"},[e._v("审核节点："+e._s(t.nodeName))])]),n("el-col",{attrs:{span:6}},[n("p",{staticClass:"timeline-cell",staticStyle:{"text-align":"right"}},[1==t.handleStatus?n("el-link",{attrs:{underline:!1,type:"success"}},[e._v("审核通过\n                ")]):n("el-link",{attrs:{underline:!1,type:"danger"}},[e._v("审核拒绝")])],1)])],1),n("p",{staticClass:"timeline-cell"},[e._v("审核人员："+e._s(t.userName)+e._s(1==t.status?"(加签)":""))]),t.handleOpinion?n("p",{staticClass:"timeline-cell"},[e._v("\n            审核意见："+e._s(t.handleOpinion))]):e._e(),t.signImg?n("p",{staticClass:"timeline-cell"},[e._v("\n            审核签名："),n("img",{staticClass:"signImg",attrs:{src:t.signImg}})]):e._e()],1)],1)]})),e.endTime?n("el-timeline-item",{attrs:{timestamp:e._f("toDate")(e.endTime),placement:"top"}},[n("el-card",[n("p",{staticClass:"timeline-cell"},[e._v("流程结束")])])],1):e._e()],2)],1)},a=[],o=(n("c5f6"),{props:{list:{type:Array,default:[]},endTime:{type:Number,default:0}},name:"recordList"}),s=o,r=n("2877"),l=Object(r["a"])(s,i,a,!1,null,null,null);t["default"]=l.exports},d4ec:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i}))},e16c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"JNPF-dialog JNPF-dialog_center JNPF-dialog-export",attrs:{title:"导出数据","close-on-click-modal":!1,visible:e.visible,"lock-scroll":"",width:"600px"},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{attrs:{"label-position":"top"}},[n("el-form-item",[n("el-radio-group",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("el-radio",{attrs:{label:0}},[e._v("当前页面数据")]),n("el-radio",{attrs:{label:1}},[e._v("全部页面数据")])],1)],1),n("el-form-item",{staticClass:"export-line"},[n("p",{staticClass:"export-label",attrs:{slot:"label"},slot:"label"},[e._v("列表数据"),n("span",[e._v("请选择导出字段")])]),n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),n("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},e._l(e.columnList,(function(t){return n("el-checkbox",{key:t.prop,staticClass:"column-item",attrs:{label:t.prop}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("p",{staticClass:"footer-tip"},[e._v("提示:系统将导出列表中选中的数据")]),n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("common.cancelButton")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[e._v("导 出")])],1)],1)},a=[],o={data:function(){return{visible:!1,btnLoading:!1,type:0,columns:[],checkAll:!0,isIndeterminate:!1,columnList:[]}},methods:{init:function(e){this.visible=!0,this.columnList=e,this.columns=e.map((function(e){return e.prop}))},handleCheckAllChange:function(e){this.columns=e?this.columnList.map((function(e){return e.prop})):[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.columnList.length,this.isIndeterminate=t>0&&t<this.columnList.length},downLoad:function(){this.$emit("download",{dataType:this.type,selectKey:this.columns})}}},s=o,r=n("2877"),l=Object(r["a"])(s,i,a,!1,null,null,null);t["default"]=l.exports},e200:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return f}));var i=n("b775");function a(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/List/".concat(e),method:"get",data:t})}function o(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/".concat(e),method:"get",data:t})}function s(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Audit/".concat(e),method:"post",data:t})}function r(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Reject/".concat(e),method:"post",data:t})}function l(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Recall/".concat(e),method:"post",data:t})}function c(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Cancel/".concat(e),method:"post",data:t})}function u(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Transfer/".concat(e),method:"post",data:t})}function f(e,t){return Object(i["a"])({url:"/api/workflow/Engine/FlowBefore/Assign/".concat(e),method:"post",data:t})}},ee05:function(e,t,n){"use strict";n("54b1")},f400:function(e,t,n){"use strict";var i=n("c26b"),a=n("b39a"),o="Map";e.exports=n("e0b8")(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(a(this,o),e);return t&&t.v},set:function(e,t){return i.def(a(this,o),0===e?0:e,t)}},i,!0)}}]);